{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import{useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_API_BASE||window.location.origin;function App(){const[status,setStatus]=useState(null);const[sqlData,setSqlData]=useState({dwjjob:[],dwvveh:[]});const[adbIPs,setAdbIPs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[message,setMessage]=useState(null);const[newIP,setNewIP]=useState('');const[updateInterval,setUpdateInterval]=useState(5);const[autoUpdateEnabled,setAutoUpdateEnabled]=useState(false);const[extractionModalOpen,setExtractionModalOpen]=useState(false);const[extractionResult,setExtractionResult]=useState(null);const[settingsModalOpen,setSettingsModalOpen]=useState(false);const[loadNumbers,setLoadNumbers]=useState([]);const[loadNumbersStats,setLoadNumbersStats]=useState({totalLoads:0,totalRecords:0});const[loadDetails,setLoadDetails]=useState(null);const[loadDetailsModalOpen,setLoadDetailsModalOpen]=useState(false);const[countdown,setCountdown]=useState('--:--:--');const countdownInterval=useRef(null);// Live server uptime counter\nconst[uptime,setUptime]=useState(0);// Add device modal state\nconst[addDeviceModalOpen,setAddDeviceModalOpen]=useState(false);const[newDeviceIP,setNewDeviceIP]=useState('');const[newDeviceName,setNewDeviceName]=useState('');// Track last interval to prevent repeated messages\nconst[lastInterval,setLastInterval]=useState(null);// State for data table modal\nconst[dataTableModalOpen,setDataTableModalOpen]=useState(false);const[dataTableModalTitle,setDataTableModalTitle]=useState('');const[dataTableModalRows,setDataTableModalRows]=useState([]);// State for Load Numbers modal\nconst[loadNumbersModalOpen,setLoadNumbersModalOpen]=useState(false);const[loadNumbersTable,setLoadNumbersTable]=useState([]);const[loadNumbersStatsTable,setLoadNumbersStatsTable]=useState({totalLoads:0,totalRecords:0});const[loadDetailsData,setLoadDetailsData]=useState(null);// State for Map Popup modal\nconst[mapPopupOpen,setMapPopupOpen]=useState(false);const[mapPopupUrl,setMapPopupUrl]=useState('');// Color palette for letter badges\nconst letterColors=['#4f46e5','#16a34a','#f59e42','#e11d48','#0ea5e9','#fbbf24','#a21caf','#059669','#b91c1c','#7c3aed'];function letterBadge(letter){if(!letter)return null;const idx=letter.charCodeAt(0)-65;const color=letterColors[idx%letterColors.length];return/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-block',background:color,color:'#fff',borderRadius:'50%',width:'22px',height:'22px',lineHeight:'22px',textAlign:'center',fontWeight:'bold',fontSize:'14px',marginRight:'4px'},children:letter});}// Map popup handler\nfunction openMapPopup(lat,lng,postcode){let embedUrl='';if(lat&&lng){embedUrl=`https://www.google.com/maps?q=${lat},${lng}&hl=en&z=16&output=embed`;}else if(postcode){embedUrl=`https://www.google.com/maps?q=${encodeURIComponent(postcode)}&hl=en&z=16&output=embed`;}setMapPopupUrl(embedUrl);setMapPopupOpen(true);console.debug('Map popup opened:',embedUrl);}// Utility functions\nconst apiCall=async function(endpoint){let method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'GET';let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;try{const options={method:method,headers:{'Content-Type':'application/json'}};if(data){options.body=JSON.stringify(data);}const response=await fetch(`${API_BASE}${endpoint}`,options);return await response.json();}catch(error){console.error('API call failed:',error);return{error:error.message};}};const showMessage=function(msg){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setMessage({text:msg,type});setTimeout(()=>setMessage(null),5000);};// Data fetching functions\nconst fetchStatus=async()=>{try{const data=await apiCall('/status');if(data.error){setError(`Error loading status: ${data.error}`);return;}setStatus(data);setAutoUpdateEnabled(data.autoEnabled||false);setUpdateInterval(data.intervalMinutes||5);setLastInterval(data.intervalMinutes||5);setError(null);}catch(error){setError(`Error loading status: ${error.message}`);}};const fetchSQLData=async()=>{try{const[dwjjob,dwvveh]=await Promise.all([apiCall('/webhook/dwjjob'),apiCall('/webhook/dwvveh')]);setSqlData({dwjjob:dwjjob.error?[]:dwjjob,dwvveh:dwvveh.error?[]:dwvveh});}catch(error){console.error('Error loading SQL data:',error);}};const fetchADBIPs=async()=>{try{const data=await apiCall('/webhook/adb-ips');if(data.error){setError(`Error loading ADB IPs: ${data.error}`);return;}setAdbIPs(Array.isArray(data)?data:[]);setError(null);}catch(error){setError(`Error loading ADB IPs: ${error.message}`);}};// Fetch Load Numbers\nconst fetchLoadNumbers=async()=>{const data=await apiCall('/webhook/load-numbers');if(data&&!data.error){setLoadNumbers(data.loadNumbers||[]);setLoadNumbersStats({totalLoads:data.totalLoads||0,totalRecords:data.totalRecords||0});}};// Control functions\nconst toggleAutoUpdate=async()=>{const result=await apiCall('/webhook/control','POST',{action:'toggle_auto'});if(result.error){showMessage(`Error: ${result.error}`,'error');}else{showMessage('Auto-update toggled successfully');fetchStatus();}};const setInterval=async()=>{const minutes=parseInt(updateInterval);if(isNaN(minutes)||minutes<1||minutes>1440){showMessage('Please enter a valid interval between 1 and 1440 minutes','error');return;}if(lastInterval===minutes){// Debug: No change, do not show message\nconsole.debug('setInterval: Interval unchanged, not showing message');return;}const result=await apiCall('/webhook/control','POST',{action:'set_interval',minutes:minutes});if(result.error){showMessage(`Error: ${result.error}`,'error');}else{showMessage(`Update interval set to ${minutes} minutes`);setLastInterval(minutes);fetchStatus();}};const runExtraction=async()=>{const result=await apiCall('/webhook/control','POST',{action:'run_extraction'});if(result.error){showMessage(`Error: ${result.error}`,'error');}else{setExtractionResult(result.extractionResult||{message:result.message});setExtractionModalOpen(true);setTimeout(()=>{fetchStatus();fetchSQLData();},5000);}};// Update addADBIP to support device name\nconst addADBIP=async()=>{if(!newDeviceIP.trim()){showMessage('Please enter an IP address','error');return;}const result=await apiCall('/webhook/adb-ips','POST',{action:'add',ip:newDeviceIP.trim(),name:newDeviceName.trim()||null});if(result.error){showMessage(`Error adding device: ${result.error}`,'error');}else{showMessage(`Successfully added device: ${newDeviceIP}`);setNewDeviceIP('');setNewDeviceName('');setAddDeviceModalOpen(false);fetchADBIPs();}};const removeADBIP=async ip=>{if(!window.confirm(`Are you sure you want to remove ${ip}?`)){return;}const result=await apiCall('/webhook/adb-ips','POST',{action:'remove',ip:ip});if(result.error){showMessage(`Error removing IP: ${result.error}`,'error');}else{showMessage(`Successfully removed IP: ${ip}`);fetchADBIPs();}};const testConnection=async ip=>{const result=await apiCall('/webhook/test-connection','POST',{ip:ip});if(result.error){showMessage(`Connection test failed: ${result.error}`,'error');}else{showMessage(`Connection test ${result.connected?'PASSED':'FAILED'} for ${ip}`);fetchADBIPs();// Refresh the list to show updated status\n}};// Initial data load\nuseEffect(()=>{const loadData=async()=>{setLoading(true);await Promise.all([fetchStatus(),fetchSQLData(),fetchADBIPs(),fetchLoadNumbers()]);setLoading(false);};loadData();},[]);// Auto-refresh status every 30 seconds (without flashing)\nuseEffect(()=>{const interval=setInterval(()=>{fetchStatus();},30000);return()=>clearInterval(interval);},[]);// Countdown timer for auto-update\nuseEffect(()=>{if(!status||!status.autoEnabled){setCountdown('--:--:--');if(countdownInterval.current)clearInterval(countdownInterval.current);return;}const intervalMinutes=status.intervalMinutes||5;let nextUpdate=status.nextUpdateTime?new Date(status.nextUpdateTime):new Date(Date.now()+intervalMinutes*60*1000);function updateCountdown(){const now=new Date();const timeLeft=Math.max(0,nextUpdate.getTime()-now.getTime());if(timeLeft<=0){setCountdown('00:00:00');nextUpdate=new Date(now.getTime()+intervalMinutes*60*1000);return;}const hours=Math.floor(timeLeft/(1000*60*60));const minutes=Math.floor(timeLeft%(1000*60*60)/(1000*60));const seconds=Math.floor(timeLeft%(1000*60)/1000);setCountdown(`${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`);}updateCountdown();countdownInterval.current=setInterval(updateCountdown,1000);return()=>clearInterval(countdownInterval.current);},[status]);// Live server uptime counter\nuseEffect(()=>{if(!status||typeof status.uptime!=='number')return;setUptime(status.uptime);const interval=setInterval(()=>setUptime(u=>u+1),1000);return()=>clearInterval(interval);},[status]);function formatUptime(seconds){seconds=Math.floor(seconds||0);const days=Math.floor(seconds/86400);const hours=Math.floor(seconds%86400/3600);const minutes=Math.floor(seconds%3600/60);const secs=seconds%60;let str='';if(days>0)str+=`${days}d `;if(hours>0||days>0)str+=`${hours}h `;if(minutes>0||hours>0||days>0)str+=`${minutes}m `;str+=`${secs}s`;return str.trim();}// Helper to format YYYMMDD to 'Sunday DD/MM/YYYY'\nfunction formatDate(yyyymmdd){if(!yyyymmdd||yyyymmdd.length!==8)return'';const year=yyyymmdd.slice(0,4);const month=yyyymmdd.slice(4,6);const day=yyyymmdd.slice(6,8);const dateObj=new Date(`${year}-${month}-${day}`);if(isNaN(dateObj.getTime()))return'';const days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];return`${days[dateObj.getDay()]} ${day}/${month}/${year}`;}// Responsive toggle\nconst[toggleLoading,setToggleLoading]=useState(false);const handleToggleAutoUpdate=async()=>{setToggleLoading(true);await toggleAutoUpdate();setToggleLoading(false);};// Show Load Numbers modal\nconst handleShowLoadNumbers=()=>{// Build table: Load Number, Date, Record Count\nconst dwjjob=sqlData.dwjjob||[];// Use top-level loadNumbers state variable directly\nconsole.debug('handleShowLoadNumbers: loadNumbers',loadNumbers);// Build a map of loadNumber -> most recent date\nconst loadDateMap={};dwjjob.forEach(row=>{const load=row.dwjLoad;const date=row.dwjDate;if(!load||!date)return;if(!loadDateMap[load]||date>loadDateMap[load]){loadDateMap[load]=date;}});// Add date to each load entry\nconst dataWithDate=loadNumbers.map(load=>({...load,date:(loadDateMap[load.loadNumber]||'').toString()}));// Sort by date descending\ndataWithDate.sort((a,b)=>{const dateA=(a.date||'').toString();const dateB=(b.date||'').toString();return dateB.localeCompare(dateA);});console.debug('handleShowLoadNumbers: dataWithDate',dataWithDate);setLoadNumbersTable(dataWithDate);setLoadNumbersStatsTable(loadNumbersStats);setLoadNumbersModalOpen(true);};// Show Load Details modal for a load number\nconst handleShowLoadDetails=async loadNumber=>{const result=await apiCall(`/webhook/load-details?loadNumber=${encodeURIComponent(loadNumber)}`);if(result&&!result.error){setLoadDetailsData({...result,loadNumber});setLoadDetailsModalOpen(true);}else{showMessage(`Error loading details for load number ${loadNumber}: ${result.error||'Unknown error'}`,'error');}};// Show DWJJOB or DWVVEH data in modal\nconst handleShowDataTable=type=>{if(type==='DWJJOB'){setDataTableModalTitle('DWJJOB Data');setDataTableModalRows(sqlData.dwjjob||[]);}else if(type==='DWVVEH'){setDataTableModalTitle('DWVVEH Data');setDataTableModalRows(sqlData.dwvveh||[]);}setDataTableModalOpen(true);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading BTT Auto Manager...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'2.5em',marginRight:'12px'},children:\"\\uD83D\\uDE9B\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,display:'inline-block',verticalAlign:'middle'},children:\"BTT Auto Manager\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:\"SQL Database Extraction & ADB Management\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"auto-update-controls\",style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"countdown-timer\",style:{fontFamily:'Courier New,monospace',fontSize:'1.2em',fontWeight:'bold',padding:'5px 10px',borderRadius:'5px',background:'#1a1a1a',border:'2px solid #22c55e',color:'#22c55e',minWidth:'80px',textAlign:'center'},children:countdown}),/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:autoUpdateEnabled,onChange:handleToggleAutoUpdate,disabled:toggleLoading}),/*#__PURE__*/_jsx(\"span\",{className:\"slider\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"settings-btn\",onClick:()=>setSettingsModalOpen(true),title:\"Settings\",style:{background:'none',border:'none',color:'white',cursor:'pointer',padding:'10px',borderRadius:'50%'},children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'24px'},children:\"\\u2699\\uFE0F\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[message&&/*#__PURE__*/_jsx(\"div\",{className:`message ${message.type}`,children:message.text}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"section\",children:status&&/*#__PURE__*/_jsxs(\"div\",{className:\"status-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Auto-Update Status\"}),/*#__PURE__*/_jsx(\"div\",{className:`status-value ${status.autoEnabled?'status-online':'status-offline'}`,children:status.autoEnabled?'ðŸŸ¢ Enabled':'ðŸ”´ Disabled'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Webhook Server\"}),/*#__PURE__*/_jsx(\"div\",{className:\"status-value status-online\",children:\"\\uD83D\\uDFE2 Running\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"ADB Status\"}),/*#__PURE__*/_jsx(\"div\",{className:`status-value ${status.adbConnected?'status-online':'status-offline'}`,children:status.adbConnected?'ðŸŸ¢ Connected':'ðŸ”´ Not Connected'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Server Uptime\"}),/*#__PURE__*/_jsx(\"div\",{className:\"status-value\",children:formatUptime(uptime)})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsxs(\"h2\",{id:\"sql-header\",children:[\"\\uD83D\\uDDC4\\uFE0F SQL Database Data \",/*#__PURE__*/_jsxs(\"span\",{id:\"sql-last-updated\",style:{fontSize:'0.8em',color:'#9ca3af',marginLeft:'10px'},children:[\"Last updated: \",status&&status.lastProcessed?status.lastProcessed:'Never']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"DWJJOB Data (\",sqlData.dwjjob.length,\" records)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-value\",children:[sqlData.dwjjob.length,\" locations\"]}),sqlData.dwjjob.length>0&&/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>handleShowDataTable('DWJJOB'),children:\"View Details\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"DWVVEH Data (\",sqlData.dwvveh.length,\" records)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-value\",children:[sqlData.dwvveh.length,\" vehicles\"]}),sqlData.dwvveh.length>0&&/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>handleShowDataTable('DWVVEH'),children:\"View Details\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Load Numbers (\",loadNumbersStats.totalLoads,\" unique)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-value\",children:[loadNumbersStats.totalRecords,\" total records\"]}),loadNumbersStats.totalLoads>0&&/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleShowLoadNumbers,children:\"View Details\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD83D\\uDCF1 ADB Device Management\",/*#__PURE__*/_jsx(\"button\",{className:\"add-device-btn\",onClick:()=>setAddDeviceModalOpen(true),title:\"Add New Device\",children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"refresh-btn\",onClick:fetchADBIPs,children:\"\\uD83D\\uDD04 Refresh\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Configured ADB IP Addresses\"}),adbIPs.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No ADB IP addresses configured\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"IP Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Connection Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Test Result\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:adbIPs.map((entry,index)=>{const ip=entry.ip||entry;const connected=entry.connected===true;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ip}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`connection-status ${connected?'connection-connected':'connection-disconnected'}`,children:connected?'Connected':'Disconnected'})}),/*#__PURE__*/_jsx(\"td\",{children:connected?'PASS':'FAIL'}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button danger\",onClick:()=>removeADBIP(ip),children:\"Remove\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button warning\",onClick:()=>testConnection(ip),children:\"Test\"})]})]},index);})})]})]})]}),addDeviceModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setAddDeviceModalOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-title\",style:{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'},children:\"\\uD83D\\uDCF1 Add New ADB Device\"}),/*#__PURE__*/_jsx(\"span\",{className:\"close\",style:{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'},onClick:()=>setAddDeviceModalOpen(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-device-ip\",children:\"Device IP Address:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"new-device-ip\",value:newDeviceIP,onChange:e=>setNewDeviceIP(e.target.value),placeholder:\"192.168.1.100:5555\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-device-name\",children:\"Device Name (Optional):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"new-device-name\",value:newDeviceName,onChange:e=>setNewDeviceName(e.target.value),placeholder:\"My Android Device\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"button success\",onClick:addADBIP,children:\"Add Device\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setAddDeviceModalOpen(false),style:{marginLeft:'10px'},children:\"Cancel\"})]})]})})]}),settingsModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setSettingsModalOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-title\",style:{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'},children:\"\\u2699\\uFE0F System Settings\"}),/*#__PURE__*/_jsx(\"span\",{className:\"close\",style:{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'},onClick:()=>setSettingsModalOpen(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',gap:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:'#353535',borderRadius:'10px',padding:'20px',boxShadow:'0 2px 8px #0002',border:'1px solid #4a90e2'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,color:'#e0e0e0'},children:\"Auto-Update Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Auto-Update Status:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"label\",{className:\"toggle-switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:autoUpdateEnabled,onChange:handleToggleAutoUpdate,disabled:toggleLoading}),/*#__PURE__*/_jsx(\"span\",{className:\"slider\"})]}),/*#__PURE__*/_jsx(\"span\",{children:autoUpdateEnabled?'Enabled':'Disabled'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"update-interval\",children:\"Update Interval (minutes):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"update-interval\",value:updateInterval,onChange:e=>setUpdateInterval(e.target.value),min:\"1\",max:\"1440\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:setInterval,children:\"Set Interval\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:'#353535',borderRadius:'10px',padding:'20px',boxShadow:'0 2px 8px #0002',border:'1px solid #4a90e2'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,color:'#e0e0e0'},children:\"Manual Controls\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:runExtraction,style:{marginRight:'10px'},children:\"Run Extraction Now\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:fetchStatus,children:\"Update Status\"})]})]})]})}),loadNumbersModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setLoadNumbersModalOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),style:{maxWidth:'90vw',maxHeight:'90vh',width:'900px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-title\",style:{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'},children:\"Load Numbers Data\"}),/*#__PURE__*/_jsx(\"span\",{className:\"close\",style:{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'},onClick:()=>setLoadNumbersModalOpen(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{overflow:'auto',maxHeight:'70vh',background:'#222',borderRadius:'8px',padding:'8px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Unique Loads:\"}),\" \",loadNumbersStatsTable.totalLoads||0]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Records:\"}),\" \",loadNumbersStatsTable.totalRecords||0]}),/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",style:{minWidth:'700px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Load Number\"}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Record Count\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loadNumbersTable.map((load,idx)=>{console.debug('Rendering load row',load);const formattedDate=formatDate(load.date);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",style:{color:'#4a90e2',textDecoration:'underline'},onClick:e=>{e.preventDefault();console.debug('Clicked load number',load.loadNumber);// Do NOT close the Load Numbers modal; just open Load Details on top\nhandleShowLoadDetails(load.loadNumber);},children:load.loadNumber})}),/*#__PURE__*/_jsx(\"td\",{children:formattedDate}),/*#__PURE__*/_jsx(\"td\",{children:load.count})]},idx);})})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setLoadNumbersModalOpen(false),style:{marginTop:'16px'},children:\"Close\"})]})}),loadDetailsModalOpen&&loadDetailsData&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setLoadDetailsModalOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),style:{maxWidth:'90vw',maxHeight:'90vh',width:'700px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-title\",style:{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'},children:\"Load Details\"}),/*#__PURE__*/_jsx(\"span\",{className:\"close\",style:{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'},onClick:()=>setLoadDetailsModalOpen(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'10px',fontWeight:'bold',fontSize:'1.1em'},children:[\"Details for Load Number: \",loadDetailsData.loadNumber]}),loadDetailsData.collections&&loadDetailsData.collections.length>0&&/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",style:{marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Postcode\"}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Map\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loadDetailsData.collections.sort((a,b)=>(a.letter||'').localeCompare(b.letter||'')).map((col,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:letterBadge(col.letter)}),/*#__PURE__*/_jsx(\"td\",{children:col.dwjName||''}),/*#__PURE__*/_jsx(\"td\",{children:col.dwjPostco||''}),/*#__PURE__*/_jsx(\"td\",{children:col.dwjLat&&col.dwjLong?/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();openMapPopup(col.dwjLat,col.dwjLong,null);},title:\"Show Map\",style:{color:'#4f46e5',fontSize:'1.2em'},children:\"\\uD83D\\uDDFA\\uFE0F\"}):col.dwjPostco?/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();openMapPopup(null,null,col.dwjPostco);},title:\"Show Map by Postcode\",style:{color:'#4f46e5',fontSize:'1.2em'},children:\"\\uD83D\\uDDFA\\uFE0F\"}):null})]},idx))})]}),loadDetailsData.deliveries&&loadDetailsData.deliveries.length>0&&/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",style:{marginBottom:'12px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Postcode\"}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Map\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loadDetailsData.deliveries.sort((a,b)=>(a.letter||'').localeCompare(b.letter||'')).map((del,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:letterBadge(del.letter)}),/*#__PURE__*/_jsx(\"td\",{children:del.dwjName||''}),/*#__PURE__*/_jsx(\"td\",{children:del.dwjPostco||''}),/*#__PURE__*/_jsx(\"td\",{children:del.dwjLat&&del.dwjLong?/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();openMapPopup(del.dwjLat,del.dwjLong,null);},title:\"Show Map\",style:{color:'#4f46e5',fontSize:'1.2em'},children:\"\\uD83D\\uDDFA\\uFE0F\"}):del.dwjPostco?/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();openMapPopup(null,null,del.dwjPostco);},title:\"Show Map by Postcode\",style:{color:'#4f46e5',fontSize:'1.2em'},children:\"\\uD83D\\uDDFA\\uFE0F\"}):null})]},idx))})]}),loadDetailsData.vehicles&&loadDetailsData.vehicles.length>0&&/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Vehicle Ref\"}),/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Model\"}),(loadDetailsData.collections||[]).length>1&&/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Collection\"}),(loadDetailsData.deliveries||[]).length>1&&/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:\"Delivery\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loadDetailsData.vehicles.slice().sort((a,b)=>{const la=(a.colLetter||a.delLetter||'').charCodeAt(0)||0;const lb=(b.colLetter||b.delLetter||'').charCodeAt(0)||0;return la-lb;}).map((row,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:row.dwvVehRef}),/*#__PURE__*/_jsx(\"td\",{children:row.dwvModDes}),(loadDetailsData.collections||[]).length>1&&/*#__PURE__*/_jsx(\"td\",{children:row.colLetter&&letterBadge(row.colLetter)}),(loadDetailsData.deliveries||[]).length>1&&/*#__PURE__*/_jsx(\"td\",{children:row.delLetter&&letterBadge(row.delLetter)})]},idx))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setLoadDetailsModalOpen(false),style:{marginTop:'16px'},children:\"Close\"})]})}),mapPopupOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setMapPopupOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),style:{maxWidth:'820px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-title\",style:{fontSize:'1.2em',fontWeight:'bold',color:'#e0e0e0'},children:\"Location Map\"}),/*#__PURE__*/_jsx(\"span\",{className:\"close\",style:{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'},onClick:()=>setMapPopupOpen(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:mapPopupUrl?/*#__PURE__*/_jsx(\"iframe\",{src:mapPopupUrl,width:\"800\",height:\"500\",style:{borderRadius:'8px',border:0,boxShadow:'0 2px 8px #0003'},allowFullScreen:true,loading:\"lazy\",referrerPolicy:\"no-referrer-when-downgrade\"}):/*#__PURE__*/_jsx(\"div\",{style:{color:'#aaa',padding:'20px'},children:\"No GPS coordinates or postcode available for this location.\"})})]})}),extractionModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setExtractionModalOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"SQL Extraction Result\"}),extractionResult&&/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'60vh',overflowY:'auto',textAlign:'left',fontSize:'0.95em'},children:/*#__PURE__*/_jsxs(\"pre\",{style:{whiteSpace:'pre-wrap',wordBreak:'break-all'},children:[extractionResult.success===true?'âœ… Extraction Succeeded\\n':'',extractionResult.success===false?'âŒ Extraction Failed\\n':'',extractionResult.stdout?`\\n[stdout]\\n${extractionResult.stdout}`:'',extractionResult.stderr?`\\n[stderr]\\n${extractionResult.stderr}`:'',extractionResult.log?`\\n[getsql.log]\\n${extractionResult.log}`:'',extractionResult.error?`\\n[error]\\n${extractionResult.error}`:'',extractionResult.message?`\\n${extractionResult.message}`:'']})}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setExtractionModalOpen(false),style:{marginTop:16},children:\"Close\"})]})}),dataTableModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setDataTableModalOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),style:{maxWidth:'90vw',maxHeight:'90vh',width:'1000px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-title\",style:{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'},children:dataTableModalTitle}),/*#__PURE__*/_jsx(\"span\",{className:\"close\",style:{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'},onClick:()=>setDataTableModalOpen(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflow:'auto',maxHeight:'70vh',background:'#222',borderRadius:'8px',padding:'8px'},children:dataTableModalRows.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",style:{minWidth:'900px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(dataTableModalRows[0]).map((key,idx)=>/*#__PURE__*/_jsx(\"th\",{style:{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'},children:key},idx))})}),/*#__PURE__*/_jsx(\"tbody\",{children:dataTableModalRows.map((row,i)=>/*#__PURE__*/_jsx(\"tr\",{children:Object.values(row).map((val,j)=>/*#__PURE__*/_jsx(\"td\",{children:val||''},j))},i))})]}):/*#__PURE__*/_jsx(\"div\",{style:{color:'#aaa',padding:'20px'},children:\"No data available\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setDataTableModalOpen(false),style:{marginTop:'16px'},children:\"Close\"})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","API_BASE","process","env","REACT_APP_API_BASE","window","location","origin","App","status","setStatus","sqlData","setSqlData","dwjjob","dwvveh","adbIPs","setAdbIPs","loading","setLoading","error","setError","message","setMessage","newIP","setNewIP","updateInterval","setUpdateInterval","autoUpdateEnabled","setAutoUpdateEnabled","extractionModalOpen","setExtractionModalOpen","extractionResult","setExtractionResult","settingsModalOpen","setSettingsModalOpen","loadNumbers","setLoadNumbers","loadNumbersStats","setLoadNumbersStats","totalLoads","totalRecords","loadDetails","setLoadDetails","loadDetailsModalOpen","setLoadDetailsModalOpen","countdown","setCountdown","countdownInterval","uptime","setUptime","addDeviceModalOpen","setAddDeviceModalOpen","newDeviceIP","setNewDeviceIP","newDeviceName","setNewDeviceName","lastInterval","setLastInterval","dataTableModalOpen","setDataTableModalOpen","dataTableModalTitle","setDataTableModalTitle","dataTableModalRows","setDataTableModalRows","loadNumbersModalOpen","setLoadNumbersModalOpen","loadNumbersTable","setLoadNumbersTable","loadNumbersStatsTable","setLoadNumbersStatsTable","loadDetailsData","setLoadDetailsData","mapPopupOpen","setMapPopupOpen","mapPopupUrl","setMapPopupUrl","letterColors","letterBadge","letter","idx","charCodeAt","color","length","style","display","background","borderRadius","width","height","lineHeight","textAlign","fontWeight","fontSize","marginRight","children","openMapPopup","lat","lng","postcode","embedUrl","encodeURIComponent","console","debug","apiCall","endpoint","method","arguments","undefined","data","options","headers","body","JSON","stringify","response","fetch","json","showMessage","msg","type","text","setTimeout","fetchStatus","autoEnabled","intervalMinutes","fetchSQLData","Promise","all","fetchADBIPs","Array","isArray","fetchLoadNumbers","toggleAutoUpdate","result","action","setInterval","minutes","parseInt","isNaN","runExtraction","addADBIP","trim","ip","name","removeADBIP","confirm","testConnection","connected","loadData","interval","clearInterval","current","nextUpdate","nextUpdateTime","Date","now","updateCountdown","timeLeft","Math","max","getTime","hours","floor","seconds","toString","padStart","u","formatUptime","days","secs","str","formatDate","yyyymmdd","year","slice","month","day","dateObj","getDay","toggleLoading","setToggleLoading","handleToggleAutoUpdate","handleShowLoadNumbers","loadDateMap","forEach","row","load","dwjLoad","date","dwjDate","dataWithDate","map","loadNumber","sort","a","b","dateA","dateB","localeCompare","handleShowLoadDetails","handleShowDataTable","className","justifyContent","alignItems","gap","margin","verticalAlign","fontFamily","padding","border","minWidth","checked","onChange","disabled","onClick","title","cursor","adbConnected","id","marginLeft","lastProcessed","entry","index","e","stopPropagation","borderBottom","paddingBottom","marginBottom","htmlFor","value","target","placeholder","marginTop","flexDirection","flex","boxShadow","min","maxWidth","maxHeight","overflow","position","top","zIndex","formattedDate","href","textDecoration","preventDefault","count","collections","col","dwjName","dwjPostco","dwjLat","dwjLong","deliveries","del","vehicles","la","colLetter","delLetter","lb","dwvVehRef","dwvModDes","src","allowFullScreen","referrerPolicy","overflowY","whiteSpace","wordBreak","success","stdout","stderr","log","Object","keys","key","i","values","val","j"],"sources":["/mnt/user/appdata/BCASql extraction/web-ui/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { useRef } from 'react';\n\nconst API_BASE = process.env.REACT_APP_API_BASE || window.location.origin;\n\nfunction App() {\n  const [status, setStatus] = useState(null);\n  const [sqlData, setSqlData] = useState({ dwjjob: [], dwvveh: [] });\n  const [adbIPs, setAdbIPs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [message, setMessage] = useState(null);\n  const [newIP, setNewIP] = useState('');\n  const [updateInterval, setUpdateInterval] = useState(5);\n  const [autoUpdateEnabled, setAutoUpdateEnabled] = useState(false);\n  const [extractionModalOpen, setExtractionModalOpen] = useState(false);\n  const [extractionResult, setExtractionResult] = useState(null);\n  const [settingsModalOpen, setSettingsModalOpen] = useState(false);\n  const [loadNumbers, setLoadNumbers] = useState([]);\n  const [loadNumbersStats, setLoadNumbersStats] = useState({ totalLoads: 0, totalRecords: 0 });\n  const [loadDetails, setLoadDetails] = useState(null);\n  const [loadDetailsModalOpen, setLoadDetailsModalOpen] = useState(false);\n  const [countdown, setCountdown] = useState('--:--:--');\n  const countdownInterval = useRef(null);\n  // Live server uptime counter\n  const [uptime, setUptime] = useState(0);\n  // Add device modal state\n  const [addDeviceModalOpen, setAddDeviceModalOpen] = useState(false);\n  const [newDeviceIP, setNewDeviceIP] = useState('');\n  const [newDeviceName, setNewDeviceName] = useState('');\n  // Track last interval to prevent repeated messages\n  const [lastInterval, setLastInterval] = useState(null);\n  // State for data table modal\n  const [dataTableModalOpen, setDataTableModalOpen] = useState(false);\n  const [dataTableModalTitle, setDataTableModalTitle] = useState('');\n  const [dataTableModalRows, setDataTableModalRows] = useState([]);\n  // State for Load Numbers modal\n  const [loadNumbersModalOpen, setLoadNumbersModalOpen] = useState(false);\n  const [loadNumbersTable, setLoadNumbersTable] = useState([]);\n  const [loadNumbersStatsTable, setLoadNumbersStatsTable] = useState({ totalLoads: 0, totalRecords: 0 });\n  const [loadDetailsData, setLoadDetailsData] = useState(null);\n  // State for Map Popup modal\n  const [mapPopupOpen, setMapPopupOpen] = useState(false);\n  const [mapPopupUrl, setMapPopupUrl] = useState('');\n  // Color palette for letter badges\n  const letterColors = ['#4f46e5','#16a34a','#f59e42','#e11d48','#0ea5e9','#fbbf24','#a21caf','#059669','#b91c1c','#7c3aed'];\n  function letterBadge(letter) {\n    if (!letter) return null;\n    const idx = letter.charCodeAt(0) - 65;\n    const color = letterColors[idx % letterColors.length];\n    return <span style={{display:'inline-block',background:color,color:'#fff',borderRadius:'50%',width:'22px',height:'22px',lineHeight:'22px',textAlign:'center',fontWeight:'bold',fontSize:'14px',marginRight:'4px'}}>{letter}</span>;\n  }\n  // Map popup handler\n  function openMapPopup(lat, lng, postcode) {\n    let embedUrl = '';\n    if (lat && lng) {\n      embedUrl = `https://www.google.com/maps?q=${lat},${lng}&hl=en&z=16&output=embed`;\n    } else if (postcode) {\n      embedUrl = `https://www.google.com/maps?q=${encodeURIComponent(postcode)}&hl=en&z=16&output=embed`;\n    }\n    setMapPopupUrl(embedUrl);\n    setMapPopupOpen(true);\n    console.debug('Map popup opened:', embedUrl);\n  }\n\n  // Utility functions\n  const apiCall = async (endpoint, method = 'GET', data = null) => {\n    try {\n      const options = {\n        method: method,\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      };\n      \n      if (data) {\n        options.body = JSON.stringify(data);\n      }\n      \n      const response = await fetch(`${API_BASE}${endpoint}`, options);\n      return await response.json();\n    } catch (error) {\n      console.error('API call failed:', error);\n      return { error: error.message };\n    }\n  };\n\n  const showMessage = (msg, type = 'success') => {\n    setMessage({ text: msg, type });\n    setTimeout(() => setMessage(null), 5000);\n  };\n\n  // Data fetching functions\n  const fetchStatus = async () => {\n    try {\n      const data = await apiCall('/status');\n      if (data.error) {\n        setError(`Error loading status: ${data.error}`);\n        return;\n      }\n      setStatus(data);\n      setAutoUpdateEnabled(data.autoEnabled || false);\n      setUpdateInterval(data.intervalMinutes || 5);\n      setLastInterval(data.intervalMinutes || 5);\n      setError(null);\n    } catch (error) {\n      setError(`Error loading status: ${error.message}`);\n    }\n  };\n\n  const fetchSQLData = async () => {\n    try {\n      const [dwjjob, dwvveh] = await Promise.all([\n        apiCall('/webhook/dwjjob'),\n        apiCall('/webhook/dwvveh')\n      ]);\n      \n      setSqlData({\n        dwjjob: dwjjob.error ? [] : dwjjob,\n        dwvveh: dwvveh.error ? [] : dwvveh\n      });\n    } catch (error) {\n      console.error('Error loading SQL data:', error);\n    }\n  };\n\n  const fetchADBIPs = async () => {\n    try {\n      const data = await apiCall('/webhook/adb-ips');\n      if (data.error) {\n        setError(`Error loading ADB IPs: ${data.error}`);\n        return;\n      }\n      setAdbIPs(Array.isArray(data) ? data : []);\n      setError(null);\n    } catch (error) {\n      setError(`Error loading ADB IPs: ${error.message}`);\n    }\n  };\n\n  // Fetch Load Numbers\n  const fetchLoadNumbers = async () => {\n    const data = await apiCall('/webhook/load-numbers');\n    if (data && !data.error) {\n      setLoadNumbers(data.loadNumbers || []);\n      setLoadNumbersStats({ totalLoads: data.totalLoads || 0, totalRecords: data.totalRecords || 0 });\n    }\n  };\n\n  // Control functions\n  const toggleAutoUpdate = async () => {\n    const result = await apiCall('/webhook/control', 'POST', {\n      action: 'toggle_auto'\n    });\n    \n    if (result.error) {\n      showMessage(`Error: ${result.error}`, 'error');\n    } else {\n      showMessage('Auto-update toggled successfully');\n      fetchStatus();\n    }\n  };\n\n  const setInterval = async () => {\n    const minutes = parseInt(updateInterval);\n    if (isNaN(minutes) || minutes < 1 || minutes > 1440) {\n      showMessage('Please enter a valid interval between 1 and 1440 minutes', 'error');\n      return;\n    }\n    if (lastInterval === minutes) {\n      // Debug: No change, do not show message\n      console.debug('setInterval: Interval unchanged, not showing message');\n      return;\n    }\n    \n    const result = await apiCall('/webhook/control', 'POST', {\n      action: 'set_interval',\n      minutes: minutes\n    });\n    \n    if (result.error) {\n      showMessage(`Error: ${result.error}`, 'error');\n    } else {\n      showMessage(`Update interval set to ${minutes} minutes`);\n      setLastInterval(minutes);\n      fetchStatus();\n    }\n  };\n\n  const runExtraction = async () => {\n    const result = await apiCall('/webhook/control', 'POST', {\n      action: 'run_extraction'\n    });\n    \n    if (result.error) {\n      showMessage(`Error: ${result.error}`, 'error');\n    } else {\n      setExtractionResult(result.extractionResult || { message: result.message });\n      setExtractionModalOpen(true);\n      setTimeout(() => {\n        fetchStatus();\n        fetchSQLData();\n      }, 5000);\n    }\n  };\n\n  // Update addADBIP to support device name\n  const addADBIP = async () => {\n    if (!newDeviceIP.trim()) {\n      showMessage('Please enter an IP address', 'error');\n      return;\n    }\n    const result = await apiCall('/webhook/adb-ips', 'POST', {\n      action: 'add',\n      ip: newDeviceIP.trim(),\n      name: newDeviceName.trim() || null\n    });\n    if (result.error) {\n      showMessage(`Error adding device: ${result.error}`, 'error');\n    } else {\n      showMessage(`Successfully added device: ${newDeviceIP}`);\n      setNewDeviceIP('');\n      setNewDeviceName('');\n      setAddDeviceModalOpen(false);\n      fetchADBIPs();\n    }\n  };\n\n  const removeADBIP = async (ip) => {\n    if (!window.confirm(`Are you sure you want to remove ${ip}?`)) {\n      return;\n    }\n    \n    const result = await apiCall('/webhook/adb-ips', 'POST', {\n      action: 'remove',\n      ip: ip\n    });\n    \n    if (result.error) {\n      showMessage(`Error removing IP: ${result.error}`, 'error');\n    } else {\n      showMessage(`Successfully removed IP: ${ip}`);\n      fetchADBIPs();\n    }\n  };\n\n  const testConnection = async (ip) => {\n    const result = await apiCall('/webhook/test-connection', 'POST', {\n      ip: ip\n    });\n    \n    if (result.error) {\n      showMessage(`Connection test failed: ${result.error}`, 'error');\n    } else {\n      showMessage(`Connection test ${result.connected ? 'PASSED' : 'FAILED'} for ${ip}`);\n      fetchADBIPs(); // Refresh the list to show updated status\n    }\n  };\n\n  // Initial data load\n  useEffect(() => {\n    const loadData = async () => {\n      setLoading(true);\n      await Promise.all([\n        fetchStatus(),\n        fetchSQLData(),\n        fetchADBIPs(),\n        fetchLoadNumbers()\n      ]);\n      setLoading(false);\n    };\n    \n    loadData();\n  }, []);\n\n  // Auto-refresh status every 30 seconds (without flashing)\n  useEffect(() => {\n    const interval = setInterval(() => {\n      fetchStatus();\n    }, 30000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  // Countdown timer for auto-update\n  useEffect(() => {\n    if (!status || !status.autoEnabled) {\n      setCountdown('--:--:--');\n      if (countdownInterval.current) clearInterval(countdownInterval.current);\n      return;\n    }\n    const intervalMinutes = status.intervalMinutes || 5;\n    let nextUpdate = status.nextUpdateTime ? new Date(status.nextUpdateTime) : new Date(Date.now() + intervalMinutes * 60 * 1000);\n    function updateCountdown() {\n      const now = new Date();\n      const timeLeft = Math.max(0, nextUpdate.getTime() - now.getTime());\n      if (timeLeft <= 0) {\n        setCountdown('00:00:00');\n        nextUpdate = new Date(now.getTime() + intervalMinutes * 60 * 1000);\n        return;\n      }\n      const hours = Math.floor(timeLeft / (1000 * 60 * 60));\n      const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));\n      const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);\n      setCountdown(`${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`);\n    }\n    updateCountdown();\n    countdownInterval.current = setInterval(updateCountdown, 1000);\n    return () => clearInterval(countdownInterval.current);\n  }, [status]);\n\n  // Live server uptime counter\n  useEffect(() => {\n    if (!status || typeof status.uptime !== 'number') return;\n    setUptime(status.uptime);\n    const interval = setInterval(() => setUptime(u => u + 1), 1000);\n    return () => clearInterval(interval);\n  }, [status]);\n  function formatUptime(seconds) {\n    seconds = Math.floor(seconds || 0);\n    const days = Math.floor(seconds / 86400);\n    const hours = Math.floor((seconds % 86400) / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n    let str = '';\n    if (days > 0) str += `${days}d `;\n    if (hours > 0 || days > 0) str += `${hours}h `;\n    if (minutes > 0 || hours > 0 || days > 0) str += `${minutes}m `;\n    str += `${secs}s`;\n    return str.trim();\n  }\n\n  // Helper to format YYYMMDD to 'Sunday DD/MM/YYYY'\n  function formatDate(yyyymmdd) {\n    if (!yyyymmdd || yyyymmdd.length !== 8) return '';\n    const year = yyyymmdd.slice(0,4);\n    const month = yyyymmdd.slice(4,6);\n    const day = yyyymmdd.slice(6,8);\n    const dateObj = new Date(`${year}-${month}-${day}`);\n    if (isNaN(dateObj.getTime())) return '';\n    const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];\n    return `${days[dateObj.getDay()]} ${day}/${month}/${year}`;\n  }\n\n  // Responsive toggle\n  const [toggleLoading, setToggleLoading] = useState(false);\n  const handleToggleAutoUpdate = async () => {\n    setToggleLoading(true);\n    await toggleAutoUpdate();\n    setToggleLoading(false);\n  };\n\n  // Show Load Numbers modal\n  const handleShowLoadNumbers = () => {\n    // Build table: Load Number, Date, Record Count\n    const dwjjob = sqlData.dwjjob || [];\n    // Use top-level loadNumbers state variable directly\n    console.debug('handleShowLoadNumbers: loadNumbers', loadNumbers);\n    // Build a map of loadNumber -> most recent date\n    const loadDateMap = {};\n    dwjjob.forEach(row => {\n      const load = row.dwjLoad;\n      const date = row.dwjDate;\n      if (!load || !date) return;\n      if (!loadDateMap[load] || date > loadDateMap[load]) {\n        loadDateMap[load] = date;\n      }\n    });\n    // Add date to each load entry\n    const dataWithDate = loadNumbers.map(load => ({\n      ...load,\n      date: (loadDateMap[load.loadNumber] || '').toString()\n    }));\n    // Sort by date descending\n    dataWithDate.sort((a, b) => {\n      const dateA = (a.date || '').toString();\n      const dateB = (b.date || '').toString();\n      return dateB.localeCompare(dateA);\n    });\n    console.debug('handleShowLoadNumbers: dataWithDate', dataWithDate);\n    setLoadNumbersTable(dataWithDate);\n    setLoadNumbersStatsTable(loadNumbersStats);\n    setLoadNumbersModalOpen(true);\n  };\n  // Show Load Details modal for a load number\n  const handleShowLoadDetails = async (loadNumber) => {\n    const result = await apiCall(`/webhook/load-details?loadNumber=${encodeURIComponent(loadNumber)}`);\n    if (result && !result.error) {\n      setLoadDetailsData({ ...result, loadNumber });\n      setLoadDetailsModalOpen(true);\n    } else {\n      showMessage(`Error loading details for load number ${loadNumber}: ${result.error || 'Unknown error'}`, 'error');\n    }\n  };\n\n  // Show DWJJOB or DWVVEH data in modal\n  const handleShowDataTable = (type) => {\n    if (type === 'DWJJOB') {\n      setDataTableModalTitle('DWJJOB Data');\n      setDataTableModalRows(sqlData.dwjjob || []);\n    } else if (type === 'DWVVEH') {\n      setDataTableModalTitle('DWVVEH Data');\n      setDataTableModalRows(sqlData.dwvveh || []);\n    }\n    setDataTableModalOpen(true);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container\">\n        <div className=\"loading\">Loading BTT Auto Manager...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\" style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>\n        <div style={{display:'flex',alignItems:'center',gap:'10px'}}>\n          <span style={{fontSize:'2.5em',marginRight:'12px'}}>ðŸš›</span>\n          <div>\n            <h1 style={{margin:0,display:'inline-block',verticalAlign:'middle'}}>BTT Auto Manager</h1>\n            <p style={{margin:0}}>SQL Database Extraction & ADB Management</p>\n          </div>\n        </div>\n        <div style={{display:'flex',alignItems:'center',gap:'15px'}}>\n          <div className=\"auto-update-controls\" style={{display:'flex',alignItems:'center',gap:'10px'}}>\n            <div className=\"countdown-timer\" style={{fontFamily:'Courier New,monospace',fontSize:'1.2em',fontWeight:'bold',padding:'5px 10px',borderRadius:'5px',background:'#1a1a1a',border:'2px solid #22c55e',color:'#22c55e',minWidth:'80px',textAlign:'center'}}>{countdown}</div>\n            <label className=\"toggle-switch\">\n              <input type=\"checkbox\" checked={autoUpdateEnabled} onChange={handleToggleAutoUpdate} disabled={toggleLoading} />\n              <span className=\"slider\"></span>\n            </label>\n          </div>\n          <button className=\"settings-btn\" onClick={()=>setSettingsModalOpen(true)} title=\"Settings\" style={{background:'none',border:'none',color:'white',cursor:'pointer',padding:'10px',borderRadius:'50%'}}>\n            <span style={{fontSize:'24px'}}>âš™ï¸</span>\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"content\">\n        {message && (\n          <div className={`message ${message.type}`}>\n            {message.text}\n          </div>\n        )}\n        \n        {error && (\n          <div className=\"error\">\n            {error}\n          </div>\n        )}\n\n        {/* System Status Section - no title */}\n        <div className=\"section\">\n          {status && (\n            <div className=\"status-grid\">\n              <div className=\"status-card\">\n                <h3>Auto-Update Status</h3>\n                <div className={`status-value ${status.autoEnabled ? 'status-online' : 'status-offline'}`}>{status.autoEnabled ? 'ðŸŸ¢ Enabled' : 'ðŸ”´ Disabled'}</div>\n              </div>\n              <div className=\"status-card\">\n                <h3>Webhook Server</h3>\n                <div className=\"status-value status-online\">ðŸŸ¢ Running</div>\n              </div>\n              <div className=\"status-card\">\n                <h3>ADB Status</h3>\n                <div className={`status-value ${status.adbConnected ? 'status-online' : 'status-offline'}`}>{status.adbConnected ? 'ðŸŸ¢ Connected' : 'ðŸ”´ Not Connected'}</div>\n              </div>\n              <div className=\"status-card\">\n                <h3>Server Uptime</h3>\n                <div className=\"status-value\">{formatUptime(uptime)}</div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* SQL Data Section */}\n        <div className=\"section\">\n          <h2 id=\"sql-header\">ðŸ—„ï¸ SQL Database Data <span id=\"sql-last-updated\" style={{fontSize:'0.8em',color:'#9ca3af',marginLeft:'10px'}}>Last updated: {status && status.lastProcessed ? status.lastProcessed : 'Never'}</span></h2>\n          \n          <div className=\"status-grid\">\n            <div className=\"status-card\">\n              <h3>DWJJOB Data ({sqlData.dwjjob.length} records)</h3>\n              <div className=\"status-value\">{sqlData.dwjjob.length} locations</div>\n              {sqlData.dwjjob.length > 0 && (\n                <button className=\"button\" onClick={() => handleShowDataTable('DWJJOB')}>\n                  View Details\n                </button>\n              )}\n            </div>\n            <div className=\"status-card\">\n              <h3>DWVVEH Data ({sqlData.dwvveh.length} records)</h3>\n              <div className=\"status-value\">{sqlData.dwvveh.length} vehicles</div>\n              {sqlData.dwvveh.length > 0 && (\n                <button className=\"button\" onClick={() => handleShowDataTable('DWVVEH')}>\n                  View Details\n                </button>\n              )}\n            </div>\n            <div className=\"status-card\">\n              <h3>Load Numbers ({loadNumbersStats.totalLoads} unique)</h3>\n              <div className=\"status-value\">{loadNumbersStats.totalRecords} total records</div>\n              {loadNumbersStats.totalLoads > 0 && (\n                <button className=\"button\" onClick={handleShowLoadNumbers}>\n                  View Details\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* ADB Device Management Section */}\n        <div className=\"section\">\n          <h2>ðŸ“± ADB Device Management \n            <button className=\"add-device-btn\" onClick={()=>setAddDeviceModalOpen(true)} title=\"Add New Device\">+</button>\n            <button className=\"refresh-btn\" onClick={fetchADBIPs}>\n              ðŸ”„ Refresh\n            </button>\n          </h2>\n          <div className=\"status-card\">\n            <h3>Configured ADB IP Addresses</h3>\n            {adbIPs.length === 0 ? (\n              <p>No ADB IP addresses configured</p>\n            ) : (\n              <table className=\"data-table\">\n                <thead>\n                  <tr>\n                    <th>IP Address</th>\n                    <th>Connection Status</th>\n                    <th>Test Result</th>\n                    <th>Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {adbIPs.map((entry, index) => {\n                    const ip = entry.ip || entry;\n                    const connected = entry.connected === true;\n                    return (\n                      <tr key={index}>\n                        <td>{ip}</td>\n                        <td>\n                          <span className={`connection-status ${connected ? 'connection-connected' : 'connection-disconnected'}`}>\n                            {connected ? 'Connected' : 'Disconnected'}\n                          </span>\n                        </td>\n                        <td>{connected ? 'PASS' : 'FAIL'}</td>\n                        <td>\n                          <button className=\"button danger\" onClick={() => removeADBIP(ip)}>\n                            Remove\n                          </button>\n                          <button className=\"button warning\" onClick={() => testConnection(ip)}>\n                            Test\n                          </button>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            )}\n          </div>\n          {/* Remove the old add device input group */}\n        </div>\n        {/* Add Device Modal */}\n        {addDeviceModalOpen && (\n          <div className=\"modal-overlay\" onClick={()=>setAddDeviceModalOpen(false)}>\n            <div className=\"modal\" onClick={e=>e.stopPropagation()}>\n              <div className=\"modal-header\" style={{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'}}>\n                <div className=\"modal-title\" style={{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'}}>ðŸ“± Add New ADB Device</div>\n                <span className=\"close\" style={{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'}} onClick={()=>setAddDeviceModalOpen(false)}>&times;</span>\n              </div>\n              <div className=\"input-group\">\n                <label htmlFor=\"new-device-ip\">Device IP Address:</label>\n                <input type=\"text\" id=\"new-device-ip\" value={newDeviceIP} onChange={e=>setNewDeviceIP(e.target.value)} placeholder=\"192.168.1.100:5555\" />\n              </div>\n              <div className=\"input-group\">\n                <label htmlFor=\"new-device-name\">Device Name (Optional):</label>\n                <input type=\"text\" id=\"new-device-name\" value={newDeviceName} onChange={e=>setNewDeviceName(e.target.value)} placeholder=\"My Android Device\" />\n              </div>\n              <div style={{marginTop:'20px'}}>\n                <button className=\"button success\" onClick={addADBIP}>Add Device</button>\n                <button className=\"button\" onClick={()=>setAddDeviceModalOpen(false)} style={{marginLeft:'10px'}}>Cancel</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Control Section */}\n        {/* System Controls moved to Settings Modal */}\n      </div>\n      {/* Settings Modal */}\n      {settingsModalOpen && (\n        <div className=\"modal-overlay\" onClick={()=>setSettingsModalOpen(false)}>\n          <div className=\"modal\" onClick={e=>e.stopPropagation()}>\n            <div className=\"modal-header\" style={{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'}}>\n              <div className=\"modal-title\" style={{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'}}>âš™ï¸ System Settings</div>\n              <span className=\"close\" style={{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'}} onClick={()=>setSettingsModalOpen(false)}>&times;</span>\n            </div>\n            <div style={{display:'flex',flexDirection:'row',gap:'24px'}}>\n              <div style={{flex:1,background:'#353535',borderRadius:'10px',padding:'20px',boxShadow:'0 2px 8px #0002',border:'1px solid #4a90e2'}}>\n                <h3 style={{marginTop:0,color:'#e0e0e0'}}>Auto-Update Settings</h3>\n                <div className=\"input-group\">\n                  <label>Auto-Update Status:</label>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                    <label className=\"toggle-switch\">\n                      <input type=\"checkbox\" checked={autoUpdateEnabled} onChange={handleToggleAutoUpdate} disabled={toggleLoading} />\n                      <span className=\"slider\"></span>\n                    </label>\n                    <span>{autoUpdateEnabled ? 'Enabled' : 'Disabled'}</span>\n                  </div>\n                </div>\n                <div className=\"input-group\">\n                  <label htmlFor=\"update-interval\">Update Interval (minutes):</label>\n                  <input\n                    type=\"number\"\n                    id=\"update-interval\"\n                    value={updateInterval}\n                    onChange={(e) => setUpdateInterval(e.target.value)}\n                    min=\"1\"\n                    max=\"1440\"\n                  />\n                  <button className=\"button\" onClick={setInterval}>\n                    Set Interval\n                  </button>\n                </div>\n              </div>\n              <div style={{flex:1,background:'#353535',borderRadius:'10px',padding:'20px',boxShadow:'0 2px 8px #0002',border:'1px solid #4a90e2'}}>\n                <h3 style={{marginTop:0,color:'#e0e0e0'}}>Manual Controls</h3>\n                <button className=\"button\" onClick={runExtraction} style={{marginRight:'10px'}}>Run Extraction Now</button>\n                <button className=\"button\" onClick={fetchStatus}>Update Status</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      {/* Load Numbers Modal */}\n      {loadNumbersModalOpen && (\n        <div className=\"modal-overlay\" onClick={()=>setLoadNumbersModalOpen(false)}>\n          <div className=\"modal\" onClick={e=>e.stopPropagation()} style={{maxWidth:'90vw',maxHeight:'90vh',width:'900px'}}>\n            <div className=\"modal-header\" style={{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'}}>\n              <div className=\"modal-title\" style={{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'}}>Load Numbers Data</div>\n              <span className=\"close\" style={{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'}} onClick={()=>setLoadNumbersModalOpen(false)}>&times;</span>\n            </div>\n            <div style={{overflow:'auto',maxHeight:'70vh',background:'#222',borderRadius:'8px',padding:'8px'}}>\n              <p><strong>Total Unique Loads:</strong> {loadNumbersStatsTable.totalLoads || 0}</p>\n              <p><strong>Total Records:</strong> {loadNumbersStatsTable.totalRecords || 0}</p>\n              <table className=\"data-table\" style={{minWidth:'700px'}}>\n                <thead>\n                  <tr>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Load Number</th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Date</th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Record Count</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {loadNumbersTable.map((load, idx) => {\n                    console.debug('Rendering load row', load);\n                    const formattedDate = formatDate(load.date);\n                    return (\n                      <tr key={idx}>\n                        <td>\n                          <a\n                            href=\"#\"\n                            style={{color:'#4a90e2',textDecoration:'underline'}}\n                            onClick={e=>{\n                              e.preventDefault();\n                              console.debug('Clicked load number', load.loadNumber);\n                              // Do NOT close the Load Numbers modal; just open Load Details on top\n                              handleShowLoadDetails(load.loadNumber);\n                            }}\n                          >\n                            {load.loadNumber}\n                          </a>\n                        </td>\n                        <td>{formattedDate}</td>\n                        <td>{load.count}</td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n            <button className=\"button\" onClick={()=>setLoadNumbersModalOpen(false)} style={{marginTop:'16px'}}>Close</button>\n          </div>\n        </div>\n      )}\n      {/* Load Details Modal */}\n      {loadDetailsModalOpen && loadDetailsData && (\n        <div className=\"modal-overlay\" onClick={()=>setLoadDetailsModalOpen(false)}>\n          <div className=\"modal\" onClick={e=>e.stopPropagation()} style={{maxWidth:'90vw',maxHeight:'90vh',width:'700px'}}>\n            <div className=\"modal-header\" style={{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'}}>\n              <div className=\"modal-title\" style={{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'}}>Load Details</div>\n              <span className=\"close\" style={{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'}} onClick={()=>setLoadDetailsModalOpen(false)}>&times;</span>\n            </div>\n            <div style={{marginBottom:'10px',fontWeight:'bold',fontSize:'1.1em'}}>Details for Load Number: {loadDetailsData.loadNumber}</div>\n            {/* Collections */}\n            {loadDetailsData.collections && loadDetailsData.collections.length > 0 && (\n              <table className=\"data-table\" style={{marginBottom:'8px'}}>\n                <thead>\n                  <tr>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}></th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Name</th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Postcode</th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Map</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {loadDetailsData.collections.sort((a,b)=>(a.letter||'').localeCompare(b.letter||''))\n                    .map((col,idx)=>(\n                    <tr key={idx}>\n                      <td>{letterBadge(col.letter)}</td>\n                      <td>{col.dwjName||''}</td>\n                      <td>{col.dwjPostco||''}</td>\n                      <td>{(col.dwjLat && col.dwjLong) ? (\n                        <a href=\"#\" onClick={e=>{e.preventDefault();openMapPopup(col.dwjLat,col.dwjLong,null);}} title=\"Show Map\" style={{color:'#4f46e5',fontSize:'1.2em'}}>ðŸ—ºï¸</a>\n                      ) : (col.dwjPostco ? (\n                        <a href=\"#\" onClick={e=>{e.preventDefault();openMapPopup(null,null,col.dwjPostco);}} title=\"Show Map by Postcode\" style={{color:'#4f46e5',fontSize:'1.2em'}}>ðŸ—ºï¸</a>\n                      ) : null)}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n            {/* Deliveries */}\n            {loadDetailsData.deliveries && loadDetailsData.deliveries.length > 0 && (\n              <table className=\"data-table\" style={{marginBottom:'12px'}}>\n                <thead>\n                  <tr>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}></th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Name</th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Postcode</th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Map</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {loadDetailsData.deliveries.sort((a,b)=>(a.letter||'').localeCompare(b.letter||''))\n                    .map((del,idx)=>(\n                    <tr key={idx}>\n                      <td>{letterBadge(del.letter)}</td>\n                      <td>{del.dwjName||''}</td>\n                      <td>{del.dwjPostco||''}</td>\n                      <td>{(del.dwjLat && del.dwjLong) ? (\n                        <a href=\"#\" onClick={e=>{e.preventDefault();openMapPopup(del.dwjLat,del.dwjLong,null);}} title=\"Show Map\" style={{color:'#4f46e5',fontSize:'1.2em'}}>ðŸ—ºï¸</a>\n                      ) : (del.dwjPostco ? (\n                        <a href=\"#\" onClick={e=>{e.preventDefault();openMapPopup(null,null,del.dwjPostco);}} title=\"Show Map by Postcode\" style={{color:'#4f46e5',fontSize:'1.2em'}}>ðŸ—ºï¸</a>\n                      ) : null)}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n            {/* Vehicles */}\n            {loadDetailsData.vehicles && loadDetailsData.vehicles.length > 0 && (\n              <table className=\"data-table\">\n                <thead>\n                  <tr>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Vehicle Ref</th>\n                    <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Model</th>\n                    {((loadDetailsData.collections||[]).length>1) && <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Collection</th>}\n                    {((loadDetailsData.deliveries||[]).length>1) && <th style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>Delivery</th>}\n                  </tr>\n                </thead>\n                <tbody>\n                  {loadDetailsData.vehicles.slice().sort((a,b)=>{\n                    const la = ((a.colLetter || a.delLetter || '').charCodeAt(0)) || 0;\n                    const lb = ((b.colLetter || b.delLetter || '').charCodeAt(0)) || 0;\n                    return la - lb;\n                  }).map((row,idx)=>(\n                    <tr key={idx}>\n                      <td>{row.dwvVehRef}</td>\n                      <td>{row.dwvModDes}</td>\n                      {((loadDetailsData.collections||[]).length>1) && <td>{row.colLetter && letterBadge(row.colLetter)}</td>}\n                      {((loadDetailsData.deliveries||[]).length>1) && <td>{row.delLetter && letterBadge(row.delLetter)}</td>}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n            <button className=\"button\" onClick={()=>setLoadDetailsModalOpen(false)} style={{marginTop:'16px'}}>Close</button>\n          </div>\n        </div>\n      )}\n      {/* Map Popup Modal */}\n      {mapPopupOpen && (\n        <div className=\"modal-overlay\" onClick={()=>setMapPopupOpen(false)}>\n          <div className=\"modal\" onClick={e=>e.stopPropagation()} style={{maxWidth:'820px'}}>\n            <div className=\"modal-header\" style={{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'}}>\n              <div className=\"modal-title\" style={{fontSize:'1.2em',fontWeight:'bold',color:'#e0e0e0'}}>Location Map</div>\n              <span className=\"close\" style={{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'}} onClick={()=>setMapPopupOpen(false)}>&times;</span>\n            </div>\n            <div style={{textAlign:'center'}}>\n              {mapPopupUrl ? (\n                <iframe src={mapPopupUrl} width=\"800\" height=\"500\" style={{borderRadius:'8px',border:0,boxShadow:'0 2px 8px #0003'}} allowFullScreen loading=\"lazy\" referrerPolicy=\"no-referrer-when-downgrade\"></iframe>\n              ) : (\n                <div style={{color:'#aaa',padding:'20px'}}>No GPS coordinates or postcode available for this location.</div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n      {/* Extraction Result Modal */}\n      {extractionModalOpen && (\n        <div className=\"modal-overlay\" onClick={() => setExtractionModalOpen(false)}>\n          <div className=\"modal\" onClick={e => e.stopPropagation()}>\n            <h2>SQL Extraction Result</h2>\n            {extractionResult && (\n              <div style={{ maxHeight: '60vh', overflowY: 'auto', textAlign: 'left', fontSize: '0.95em' }}>\n                <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-all' }}>\n                  {extractionResult.success === true ? 'âœ… Extraction Succeeded\\n' : ''}\n                  {extractionResult.success === false ? 'âŒ Extraction Failed\\n' : ''}\n                  {extractionResult.stdout ? `\\n[stdout]\\n${extractionResult.stdout}` : ''}\n                  {extractionResult.stderr ? `\\n[stderr]\\n${extractionResult.stderr}` : ''}\n                  {extractionResult.log ? `\\n[getsql.log]\\n${extractionResult.log}` : ''}\n                  {extractionResult.error ? `\\n[error]\\n${extractionResult.error}` : ''}\n                  {extractionResult.message ? `\\n${extractionResult.message}` : ''}\n                </pre>\n              </div>\n            )}\n            <button className=\"button\" onClick={() => setExtractionModalOpen(false)} style={{ marginTop: 16 }}>Close</button>\n          </div>\n        </div>\n      )}\n      {/* Data Table Modal for DWJJOB/DWVVEH */}\n      {dataTableModalOpen && (\n        <div className=\"modal-overlay\" onClick={()=>setDataTableModalOpen(false)}>\n          <div className=\"modal\" onClick={e=>e.stopPropagation()} style={{maxWidth:'90vw',maxHeight:'90vh',width:'1000px'}}>\n            <div className=\"modal-header\" style={{display:'flex',justifyContent:'space-between',alignItems:'center',borderBottom:'1px solid #555',paddingBottom:'10px',marginBottom:'15px'}}>\n              <div className=\"modal-title\" style={{fontSize:'1.5em',fontWeight:'bold',color:'#e0e0e0'}}>{dataTableModalTitle}</div>\n              <span className=\"close\" style={{color:'#aaa',fontSize:'28px',fontWeight:'bold',cursor:'pointer'}} onClick={()=>setDataTableModalOpen(false)}>&times;</span>\n            </div>\n            <div style={{overflow:'auto',maxHeight:'70vh',background:'#222',borderRadius:'8px',padding:'8px'}}>\n              {dataTableModalRows.length > 0 ? (\n                <table className=\"data-table\" style={{minWidth:'900px'}}>\n                  <thead>\n                    <tr>\n                      {Object.keys(dataTableModalRows[0]).map((key, idx) => (\n                        <th key={idx} style={{position:'sticky',top:0,zIndex:2,background:'#4a90e2',color:'#fff'}}>{key}</th>\n                      ))}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {dataTableModalRows.map((row, i) => (\n                      <tr key={i}>\n                        {Object.values(row).map((val, j) => (\n                          <td key={j}>{val || ''}</td>\n                        ))}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              ) : (\n                <div style={{color:'#aaa',padding:'20px'}}>No data available</div>\n              )}\n            </div>\n            <button className=\"button\" onClick={()=>setDataTableModalOpen(false)} style={{marginTop:'16px'}}>Close</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}